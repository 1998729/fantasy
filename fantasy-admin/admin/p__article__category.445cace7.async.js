(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[494],{27701:function(x,T,e){"use strict";var h=e(57663),A=e(71577),i=e(71194),o=e(50146),Z=e(9715),g=e(93766),S=e(47673),M=e(4107),B=e(86582),L=e(2824),z=e(34792),p=e(48086),n=e(3182),y=e(30887),b=e(94043),a=e.n(b),P=e(67294),$=e(92339),F=e(49101),v=e(85893),G=function(c,m){return _jsxs(_Menu,{onClick:function(O){O.key!=="4"},children:[_jsx(_Menu.Item,{icon:_jsx(EditTwoTone,{}),children:"\u4FEE\u6539\u6807\u7B7E"},"2"),_jsx(_Menu.Divider,{}),_jsx(_Menu.Item,{danger:!0,icon:_jsx(CloseCircleTwoTone,{}),children:"\u5220\u9664\u6807\u7B7E"},"4")]})},k=function(){var l=(0,n.Z)(a().mark(function c(m,R,O,d){var f,C,j,I,U,s;return a().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:f={pageNum:m.current,pageSize:m.pageSize},C={},t.t0=a().keys(m);case 3:if((t.t1=t.t0()).done){t.next=10;break}if(j=t.t1.value,d.searchParamsReverse[j]){t.next=7;break}return t.abrupt("continue",3);case 7:C[d.searchParamsReverse[j]]=m[j],t.next=3;break;case 10:if(Object.keys(C).length!==0){I="";for(U in C)I+="".concat(U,"=").concat(C[U],",");f.filter=I.substr(0,I.lastIndexOf(","))}return t.next=13,d.searchRequest(f);case 13:return s=t.sent,t.abrupt("return",{data:s.data.list,success:s.success,total:s.data.total});case 15:case"end":return t.stop()}},c)}));return function(m,R,O,d){return l.apply(this,arguments)}}(),N=function(c,m,R,O){c.current.validateFields().then(function(d){m(d).then(function(f){f.status||(p.default.success("\u521B\u5EFA\u6210\u529F"),R.current.reload(),O(!1),c.current.resetFields())}).catch(function(f){console.log("create error:",f),p.default.error("\u521B\u5EFA\u5931\u8D25!")})}).catch(function(d){console.log("Validate Failed:",d)})};T.Z=function(l){var c=(0,P.useRef)(),m=(0,P.useState)(!1),R=(0,L.Z)(m,2),O=R[0],d=R[1],f=P.createRef(),C=function(){var s=(0,n.Z)(a().mark(function _(t,E,r){var D,u;return a().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.next=2,l.putRequest(E.id,E);case 2:D=K.sent,D.status||(p.default.success("\u4FEE\u6539\u6210\u529F"),(u=c.current)===null||u===void 0||u.reload());case 4:case"end":return K.stop()}},_)}));return function(t,E,r){return s.apply(this,arguments)}}(),j=function(){var s=(0,n.Z)(a().mark(function _(t,E){var r,D;return a().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.next=2,l.deleteRequest(t);case 2:r=W.sent,r.success&&(p.default.success("\u5220\u9664\u6210\u529F"),(D=c.current)===null||D===void 0||D.reload());case 4:case"end":return W.stop()}},_)}));return function(t,E){return s.apply(this,arguments)}}(),I=[].concat((0,B.Z)(l.columns),[{title:"\u64CD\u4F5C",valueType:"option",render:function(_,t,E,r){return[(0,v.jsx)("a",{onClick:function(){var u;r==null||(u=r.startEditable)===null||u===void 0||u.call(r,t.id)},children:"\u7F16\u8F91"},"editable")]}}]),U=function(_){d(_)};return(0,v.jsxs)("div",{children:[(0,v.jsx)(o.Z,{visible:O,title:l.createModalTitle,okText:"\u521B\u5EFA",cancelText:"\u53D6\u6D88",onCancel:function(){return U(!1)},onOk:function(){N(f,l.createRequest,c,d)},children:(0,v.jsx)(g.Z,{ref:f,layout:"vertical",name:"form_in_modal",initialValues:{modifier:"public"},children:(0,v.jsx)(g.Z.Item,{name:l.createNameName,label:l.createNameLabel,rules:[{required:!0,message:l.createNameMessage}],children:(0,v.jsx)(M.Z,{})})})}),(0,v.jsx)($.ZP,{columns:I,actionRef:c,size:"large",request:(0,n.Z)(a().mark(function s(){var _,t,E,r=arguments;return a().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return _=r.length>0&&r[0]!==void 0?r[0]:{},t=r.length>1?r[1]:void 0,E=r.length>2?r[2]:void 0,u.next=5,k(_,t,E,l);case 5:return u.abrupt("return",u.sent);case 6:case"end":return u.stop()}},s)})),editable:{type:"single",onSave:C,onDelete:j},columnsState:{persistenceKey:"pro-table-singe-demos",persistenceType:"localStorage"},rowKey:"id",scroll:{x:1300},options:{density:!1,fullScreen:!0,setting:!0},search:{labelWidth:"auto"},pagination:{pageSize:20},dateFormatter:"string",headerTitle:!1,toolBarRender:function(){return[(0,v.jsx)(A.Z,{icon:(0,v.jsx)(F.Z,{}),type:"primary",onClick:function(){return U(!0)},children:"\u65B0\u5EFA"},"button")]}})]})}},75283:function(x,T,e){"use strict";e.r(T),e.d(T,{default:function(){return M}});var h={};e.r(h),e.d(h,{D:function(){return i}});var A=e(11849),i={name:"name__icontains"},o=e(61145),Z=e(27701),g=e(85893),S=[{title:"\u5206\u7C7B\u540D\u79F0",dataIndex:"name",copyable:!0,ellipsis:!0},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"created",valueType:"dateTime",sorter:!0,hideInSearch:!0,readonly:!0},{title:"\u66F4\u65B0\u65F6\u95F4",dataIndex:"updated",valueType:"dateTime",sorter:!0,hideInSearch:!0,readonly:!0}],M=function(){var B={createModalTitle:"\u521B\u5EFA\u5206\u7C7B",createNameName:"name",createNameLabel:"\u5206\u7C7B\u540D\u79F0",createNameMessage:"\u5206\u7C7B\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",columnsItem:h.CategoryItem,columns:S,searchRequest:o.pc,putRequest:o.Gy,createRequest:o.cr,deleteRequest:o.hW,searchParamsReverse:i};return(0,g.jsx)(Z.Z,(0,A.Z)({},B))}},61145:function(x,T,e){"use strict";e.d(T,{pc:function(){return Z},Gy:function(){return S},cr:function(){return B},hW:function(){return z}});var h=e(3182),A=e(94043),i=e.n(A),o=e(21010);function Z(n){return g.apply(this,arguments)}function g(){return g=(0,h.Z)(i().mark(function n(y){return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,o.WY)("/api/v1/admin/category/",{method:"GET",params:y}));case 1:case"end":return a.stop()}},n)})),g.apply(this,arguments)}function S(n,y){return M.apply(this,arguments)}function M(){return M=(0,h.Z)(i().mark(function n(y,b){return i().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.abrupt("return",(0,o.WY)("/api/v1/admin/category/".concat(y,"/"),{method:"PUT",data:b}));case 1:case"end":return P.stop()}},n)})),M.apply(this,arguments)}function B(n){return L.apply(this,arguments)}function L(){return L=(0,h.Z)(i().mark(function n(y){return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,o.WY)("/api/v1/admin/category/",{method:"POST",data:y}));case 1:case"end":return a.stop()}},n)})),L.apply(this,arguments)}function z(n){return p.apply(this,arguments)}function p(){return p=(0,h.Z)(i().mark(function n(y){return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,o.WY)("/api/v1/admin/category/".concat(y,"/"),{method:"DELETE"}));case 1:case"end":return a.stop()}},n)})),p.apply(this,arguments)}}}]);
