(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[317],{64139:function(){},68179:function(){},57719:function(){},39644:function(xe,w,e){"use strict";e.r(w),e.d(w,{default:function(){return Oe}});var B=e(38663),P=e(64139),y=e(22122),k=e(96156),C=e(67294),s=e(94184),oe=e.n(s),q=e(65632),b=function(h,i){var u={};for(var t in h)Object.prototype.hasOwnProperty.call(h,t)&&i.indexOf(t)<0&&(u[t]=h[t]);if(h!=null&&typeof Object.getOwnPropertySymbols=="function")for(var p=0,t=Object.getOwnPropertySymbols(h);p<t.length;p++)i.indexOf(t[p])<0&&Object.prototype.propertyIsEnumerable.call(h,t[p])&&(u[t[p]]=h[t[p]]);return u},I=function(i){var u=i.actions,t=i.author,p=i.avatar,A=i.children,z=i.className,E=i.content,d=i.prefixCls,o=i.datetime,f=b(i,["actions","author","avatar","children","className","content","prefixCls","datetime"]),c=C.useContext(q.E_),re=c.getPrefixCls,M=c.direction,se=function(Pe,$){return C.createElement("div",{className:oe()("".concat(Pe,"-nested"))},$)},K=re("comment",d),Ne=p?C.createElement("div",{className:"".concat(K,"-avatar")},typeof p=="string"?C.createElement("img",{src:p,alt:"comment-avatar"}):p):null,je=u&&u.length?C.createElement("ul",{className:"".concat(K,"-actions")},u.map(function(ve,Pe){return C.createElement("li",{key:"action-".concat(Pe)},ve)})):null,Z=(t||o)&&C.createElement("div",{className:"".concat(K,"-content-author")},t&&C.createElement("span",{className:"".concat(K,"-content-author-name")},t),o&&C.createElement("span",{className:"".concat(K,"-content-author-time")},o)),le=C.createElement("div",{className:"".concat(K,"-content")},Z,C.createElement("div",{className:"".concat(K,"-content-detail")},E),je),Ee=oe()(K,(0,k.Z)({},"".concat(K,"-rtl"),M==="rtl"),z);return C.createElement("div",(0,y.Z)({},f,{className:Ee}),C.createElement("div",{className:"".concat(K,"-inner")},Ne,le),A?se(K,A):null)},U=I,g=e(54421),R=e(38272),pe=e(86582),Ie=e(34792),_=e(48086),S=e(3182),fe=e(69610),F=e(54941),ee=e(81306),ye=e(19809),J=e(94233),ge=e(51890),Ce=e(49111),ce=e(19650),a=e(57663),l=e(71577),x=e(9715),n=e(93766),m=e(48736),D=e(27049),H=e(47673),te=e(4107),de=e(94043),v=e.n(de),N=e(21010);function V(){return G.apply(this,arguments)}function G(){return G=(0,S.Z)(v().mark(function h(){return v().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,N.WY)("/api/v1/admin/users/dialogue/",{method:"GET"}));case 1:case"end":return u.stop()}},h)})),G.apply(this,arguments)}function O(h){return ae.apply(this,arguments)}function ae(){return ae=(0,S.Z)(v().mark(function h(i){return v().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,N.WY)("/api/v1/admin/users/dialogue/message",{method:"GET",params:i}));case 1:case"end":return t.stop()}},h)})),ae.apply(this,arguments)}function ne(h){return T.apply(this,arguments)}function T(){return T=(0,S.Z)(v().mark(function h(i){return v().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,N.WY)("/api/v1/admin/users/dialogue/message",{method:"POST",data:i}));case 1:case"end":return t.stop()}},h)})),T.apply(this,arguments)}var ue=e(75745),Q=e(84787),me=e(30381),W=e.n(me),r=e(85893),he=te.Z.TextArea,Y="",Le=function(i){if(Y===void 0)return"";if(Y.length===0)return Y=i,(0,r.jsx)(D.Z,{plain:!0,children:W()(i).format("YYYY-MM-DD HH:mm")});var u=W()(i).diff(W()(Y),"days")>=1&&(0,r.jsx)(D.Z,{plain:!0,children:W()(i).format("YYYY-MM-DD HH:mm")})||"";return Y=i,u},De=function(i){var u=i.onChange,t=i.onSubmit,p=i.submitting,A=i.value;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.Z.Item,{children:(0,r.jsx)(he,{rows:4,onChange:u,value:A,placeholder:"\u60F3\u8BF4\u70B9\u4EC0\u4E48......"})}),(0,r.jsx)(n.Z.Item,{children:(0,r.jsx)(ce.Z,{style:{float:"right"},children:(0,r.jsx)(l.Z,{htmlType:"submit",loading:p,onClick:t,type:"primary",children:"\u53D1\u9001"})})})]})},Se=function(i){var u=i.comments;return(0,r.jsxs)("div",{className:"space-align-container",children:[" ",u.map(function(t){return(0,r.jsxs)(r.Fragment,{children:[Le(t.created),t.type===1?(0,r.jsx)("div",{className:"space-align-block",style:{marginBottom:32,height:40},children:(0,r.jsxs)(ce.Z,{align:"center",style:{float:"right",clear:"both"},children:[(0,r.jsx)("span",{style:{padding:8,color:"#222226",background:"#cad9ff",display:"inline-block"},children:t.content}),(0,r.jsx)(ge.C,{src:t.avatar})]})},t.key):(0,r.jsx)("div",{className:"space-align-block",style:{marginBottom:32},children:(0,r.jsxs)(ce.Z,{align:"baseline",children:[(0,r.jsx)(ge.C,{src:t.avatar}),(0,r.jsx)("span",{style:{padding:8,display:"inline-block",color:"#8b4513",background:"#f5f6f7",boxShadow:"0 1px 2px 0 rgb(0 0 0 / 10%)"},children:t.content})]})},t.key)]})})]},"comments")},Oe=function(h){(0,ee.Z)(u,h);var i=(0,ye.Z)(u);function u(){var t;(0,fe.Z)(this,u);for(var p=arguments.length,A=new Array(p),z=0;z<p;z++)A[z]=arguments[z];return t=i.call.apply(i,[this].concat(A)),t.state={dialogueList:[],activeKey:0,articleId:0,userId:"",authorId:"",dialogueListLoading:!0,dialogueDetailLoading:!0,dialogueDetailList:[],messageLoading:!1,messageValue:"",beforeDatetime:"",userInfo:{},dstArticleId:0,dstUserId:""},t.handleDialogueListFetch=(0,S.Z)(v().mark(function E(){var d;return v().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.prev=0,f.next=3,V();case 3:d=f.sent,d.success&&(t.setState({dialogueList:d.data.list}),d.data.list.length>0&&t.setState({activeKey:d.data.list[0].id,userId:d.data.list[0].userId,authorId:d.data.list[0].authorId,articleId:d.data.list[0].articleId,dstArticleId:d.data.list[0].articleId,dstUserId:d.data.list[0].userId})),f.next=10;break;case 7:f.prev=7,f.t0=f.catch(0),_.default.error(f.t0.message);case 10:case"end":return f.stop()}},E,null,[[0,7]])})),t.handleDialogueDetailFetch=(0,S.Z)(v().mark(function E(){var d,o;return v().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return d={articleId:t.state.articleId,userId:t.state.userId,authorId:t.state.authorId},c.prev=1,c.next=4,O(d);case 4:o=c.sent,o.success&&t.setState({dialogueDetailList:o.data.list,dialogueListLoading:!1,dialogueDetailLoading:!1}),c.next=12;break;case 8:c.prev=8,c.t0=c.catch(1),_.default.error("\u83B7\u53D6\u5BF9\u8BDD\u6846\u6D88\u606F\u8BE6\u7EC6\u5931\u8D25"),console.log(c.t0);case 12:case"end":return c.stop()}},E,null,[[1,8]])})),t.userInfo=(0,S.Z)(v().mark(function E(){var d;return v().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,(0,ue.Pk)();case 2:d=f.sent,t.setState({userInfo:d});case 4:case"end":return f.stop()}},E)})),t.componentDidMount=(0,S.Z)(v().mark(function E(){return v().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,t.userInfo();case 2:return o.next=4,t.handleDialogueListFetch();case 4:if(!(t.state.activeKey>0)){o.next=7;break}return o.next=7,t.handleDialogueDetailFetch();case 7:case"end":return o.stop()}},E)})),t.handleChange=function(){var E=(0,S.Z)(v().mark(function d(o){return v().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:t.setState({activeKey:o.id,articleId:o.articleId,userId:o.userId,authorId:o.authorId,dialogueDetailLoading:!0,dialogueListLoading:!0,dstArticleId:o.articleId,dstUserId:o.userId},(0,S.Z)(v().mark(function re(){return v().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return Y="",se.next=3,t.handleDialogueDetailFetch();case 3:case"end":return se.stop()}},re)})));case 1:case"end":return c.stop()}},d)}));return function(d){return E.apply(this,arguments)}}(),t.handleMessageOnChange=function(E){t.setState({messageValue:E.target.value})},t.handleMessageSubmit=(0,S.Z)(v().mark(function E(){var d,o,f,c;return v().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return d=t.state.messageValue,t.setState({messageLoading:!0}),o=t.state.userInfo,f={type:1,userId:t.state.dstUserId,articleId:t.state.dstArticleId,authorId:o.userId,content:d},M.prev=4,M.next=7,ne(f);case 7:c=M.sent,c.success&&(t.setState({dialogueDetailList:[].concat((0,pe.Z)(t.state.dialogueDetailList),[{key:W()().format("YYYY-MM-DD HH:mm"),author:o.display||o.name,avatar:o.avatar,content:d,datetime:W()().format("YYYY-MM-DD HH:mm"),type:1}]),messageLoading:!1,messageValue:""}),Y=""),M.next=14;break;case 11:M.prev=11,M.t0=M.catch(4),_.default.error(M.t0.message);case 14:case"end":return M.stop()}},E,null,[[4,11]])})),t}return(0,F.Z)(u,[{key:"render",value:function(){var p=this,A=this.state,z=A.dialogueList,E=A.dialogueDetailList,d=A.messageLoading,o=A.messageValue;return Y="",(0,r.jsxs)(Q.ZP,{ghost:!0,split:"vertical",gutter:16,children:[(0,r.jsx)(Q.ZP,{bodyStyle:{padding:8,maxWidth:312,height:"100%"},loading:this.state.dialogueListLoading,children:(0,r.jsx)("div",{id:"scrollableDiv",style:{overflow:"auto"},children:(0,r.jsx)(R.ZP,{size:"small",itemLayout:"horizontal",dataSource:z,renderItem:function(c){return(0,r.jsx)(R.ZP.Item,{onClick:function(){p.handleChange(c)},style:{cursor:"pointer"},children:(0,r.jsx)(R.ZP.Item.Meta,{avatar:(0,r.jsx)(ge.C,{src:c.avatar}),title:(0,r.jsx)("a",{style:{color:p.state.activeKey===c.id?"#1890ff":"rgba(0, 0, 0, 0.85)"},children:c.nickName?c.nickName:c.loginName}),description:"".concat(c.content.replace(/<\/?.+?>/g,"").replace(/ /g,"").slice(0,10),"...")})},c.id)}})})}),(0,r.jsxs)(Q.ZP,{colSpan:"80%",loading:this.state.dialogueDetailLoading,children:[(0,r.jsx)(Se,{comments:E},"MessageCommentList"),(0,r.jsx)(U,{content:(0,r.jsx)(De,{onChange:this.handleMessageOnChange,onSubmit:this.handleMessageSubmit,submitting:d,value:o})})]})]})}}]),u}(C.Component)},27049:function(xe,w,e){"use strict";var B=e(22122),P=e(96156),y=e(67294),k=e(94184),C=e.n(k),s=e(65632),oe=function(b,I){var U={};for(var g in b)Object.prototype.hasOwnProperty.call(b,g)&&I.indexOf(g)<0&&(U[g]=b[g]);if(b!=null&&typeof Object.getOwnPropertySymbols=="function")for(var R=0,g=Object.getOwnPropertySymbols(b);R<g.length;R++)I.indexOf(g[R])<0&&Object.prototype.propertyIsEnumerable.call(b,g[R])&&(U[g[R]]=b[g[R]]);return U},q=function(I){return y.createElement(s.C,null,function(U){var g,R=U.getPrefixCls,pe=U.direction,Ie=I.prefixCls,_=I.type,S=_===void 0?"horizontal":_,fe=I.orientation,F=fe===void 0?"center":fe,ee=I.orientationMargin,ye=I.className,J=I.children,ge=I.dashed,Ce=I.plain,ce=oe(I,["prefixCls","type","orientation","orientationMargin","className","children","dashed","plain"]),a=R("divider",Ie),l=F.length>0?"-".concat(F):F,x=!!J,n=F==="left"&&ee!=null,m=F==="right"&&ee!=null,D=C()(a,"".concat(a,"-").concat(S),(g={},(0,P.Z)(g,"".concat(a,"-with-text"),x),(0,P.Z)(g,"".concat(a,"-with-text").concat(l),x),(0,P.Z)(g,"".concat(a,"-dashed"),!!ge),(0,P.Z)(g,"".concat(a,"-plain"),!!Ce),(0,P.Z)(g,"".concat(a,"-rtl"),pe==="rtl"),(0,P.Z)(g,"".concat(a,"-no-default-orientation-margin-left"),n),(0,P.Z)(g,"".concat(a,"-no-default-orientation-margin-right"),m),g),ye),H=(0,B.Z)((0,B.Z)({},n&&{marginLeft:ee}),m&&{marginRight:ee});return y.createElement("div",(0,B.Z)({className:D},ce,{role:"separator"}),J&&y.createElement("span",{className:"".concat(a,"-inner-text"),style:H},J))})};w.Z=q},48736:function(xe,w,e){"use strict";var B=e(38663),P=e.n(B),y=e(68179),k=e.n(y)},38272:function(xe,w,e){"use strict";e.d(w,{ZM:function(){return J},ZP:function(){return ce}});var B=e(85061),P=e(22122),y=e(96156),k=e(28481),C=e(90484),s=e(67294),oe=e(94184),q=e.n(oe),b=e(11382),I=e(25378),U=e(24308),g=e(65632),R=e(40308),pe=e(92820),Ie=e(21584),_=e(96159),S=function(a,l){var x={};for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&l.indexOf(n)<0&&(x[n]=a[n]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var m=0,n=Object.getOwnPropertySymbols(a);m<n.length;m++)l.indexOf(n[m])<0&&Object.prototype.propertyIsEnumerable.call(a,n[m])&&(x[n[m]]=a[n[m]]);return x},fe=function(l){var x=l.prefixCls,n=l.className,m=l.avatar,D=l.title,H=l.description,te=S(l,["prefixCls","className","avatar","title","description"]),de=s.useContext(g.E_),v=de.getPrefixCls,N=v("list",x),V=q()("".concat(N,"-item-meta"),n),G=s.createElement("div",{className:"".concat(N,"-item-meta-content")},D&&s.createElement("h4",{className:"".concat(N,"-item-meta-title")},D),H&&s.createElement("div",{className:"".concat(N,"-item-meta-description")},H));return s.createElement("div",(0,P.Z)({},te,{className:V}),m&&s.createElement("div",{className:"".concat(N,"-item-meta-avatar")},m),(D||H)&&G)},F=function(l){var x=l.prefixCls,n=l.children,m=l.actions,D=l.extra,H=l.className,te=l.colStyle,de=S(l,["prefixCls","children","actions","extra","className","colStyle"]),v=s.useContext(J),N=v.grid,V=v.itemLayout,G=s.useContext(g.E_),O=G.getPrefixCls,ae=function(){var r;return s.Children.forEach(n,function(he){typeof he=="string"&&(r=!0)}),r&&s.Children.count(n)>1},ne=function(){return V==="vertical"?!!D:!ae()},T=O("list",x),ue=m&&m.length>0&&s.createElement("ul",{className:"".concat(T,"-item-action"),key:"actions"},m.map(function(W,r){return s.createElement("li",{key:"".concat(T,"-item-action-").concat(r)},W,r!==m.length-1&&s.createElement("em",{className:"".concat(T,"-item-action-split")}))})),Q=N?"div":"li",me=s.createElement(Q,(0,P.Z)({},de,{className:q()("".concat(T,"-item"),(0,y.Z)({},"".concat(T,"-item-no-flex"),!ne()),H)}),V==="vertical"&&D?[s.createElement("div",{className:"".concat(T,"-item-main"),key:"content"},n,ue),s.createElement("div",{className:"".concat(T,"-item-extra"),key:"extra"},D)]:[n,ue,(0,_.Tm)(D,{key:"extra"})]);return N?s.createElement(Ie.Z,{flex:1,style:te},me):me};F.Meta=fe;var ee=F,ye=function(a,l){var x={};for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&l.indexOf(n)<0&&(x[n]=a[n]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var m=0,n=Object.getOwnPropertySymbols(a);m<n.length;m++)l.indexOf(n[m])<0&&Object.prototype.propertyIsEnumerable.call(a,n[m])&&(x[n[m]]=a[n[m]]);return x},J=s.createContext({}),ge=J.Consumer;function Ce(a){var l,x=a.pagination,n=x===void 0?!1:x,m=a.prefixCls,D=a.bordered,H=D===void 0?!1:D,te=a.split,de=te===void 0?!0:te,v=a.className,N=a.children,V=a.itemLayout,G=a.loadMore,O=a.grid,ae=a.dataSource,ne=ae===void 0?[]:ae,T=a.size,ue=a.header,Q=a.footer,me=a.loading,W=me===void 0?!1:me,r=a.rowKey,he=a.renderItem,Y=a.locale,Le=ye(a,["pagination","prefixCls","bordered","split","className","children","itemLayout","loadMore","grid","dataSource","size","header","footer","loading","rowKey","renderItem","locale"]),De=n&&(0,C.Z)(n)==="object"?n:{},Se=s.useState(De.defaultCurrent||1),Oe=(0,k.Z)(Se,2),h=Oe[0],i=Oe[1],u=s.useState(De.defaultPageSize||10),t=(0,k.Z)(u,2),p=t[0],A=t[1],z=s.useContext(g.E_),E=z.getPrefixCls,d=z.renderEmpty,o=z.direction,f={current:1,total:0},c={},re=function(L){return function(ie,X){i(ie),A(X),n&&n[L]&&n[L](ie,X)}},M=re("onChange"),se=re("onShowSizeChange"),K=function(L,ie){if(!he)return null;var X;return typeof r=="function"?X=r(L):r?X=L[r]:X=L.key,X||(X="list-item-".concat(ie)),c[ie]=X,he(L,ie)},Ne=function(){return!!(G||n||Q)},je=function(L,ie){return s.createElement("div",{className:"".concat(L,"-empty-text")},Y&&Y.emptyText||ie("List"))},Z=E("list",m),le=W;typeof le=="boolean"&&(le={spinning:le});var Ee=le&&le.spinning,ve="";switch(T){case"large":ve="lg";break;case"small":ve="sm";break;default:break}var Pe=q()(Z,(l={},(0,y.Z)(l,"".concat(Z,"-vertical"),V==="vertical"),(0,y.Z)(l,"".concat(Z,"-").concat(ve),ve),(0,y.Z)(l,"".concat(Z,"-split"),de),(0,y.Z)(l,"".concat(Z,"-bordered"),H),(0,y.Z)(l,"".concat(Z,"-loading"),Ee),(0,y.Z)(l,"".concat(Z,"-grid"),!!O),(0,y.Z)(l,"".concat(Z,"-something-after-last-item"),Ne()),(0,y.Z)(l,"".concat(Z,"-rtl"),o==="rtl"),l),v),$=(0,P.Z)((0,P.Z)((0,P.Z)({},f),{total:ne.length,current:h,pageSize:p}),n||{}),Te=Math.ceil($.total/$.pageSize);$.current>Te&&($.current=Te);var Ke=n?s.createElement("div",{className:"".concat(Z,"-pagination")},s.createElement(R.Z,(0,P.Z)({},$,{onChange:M,onShowSizeChange:se}))):null,Re=(0,B.Z)(ne);n&&ne.length>($.current-1)*$.pageSize&&(Re=(0,B.Z)(ne).splice(($.current-1)*$.pageSize,$.pageSize));var $e=(0,I.Z)(),Me=s.useMemo(function(){for(var j=0;j<U.c4.length;j+=1){var L=U.c4[j];if($e[L])return L}},[$e]),We=s.useMemo(function(){if(!!O){var j=Me&&O[Me]?O[Me]:O.column;if(j)return{width:"".concat(100/j,"%"),maxWidth:"".concat(100/j,"%")}}},[O==null?void 0:O.column,Me]),Ae=Ee&&s.createElement("div",{style:{minHeight:53}});if(Re.length>0){var be=Re.map(function(j,L){return K(j,L)}),ze=s.Children.map(be,function(j,L){return s.createElement("div",{key:c[L],style:We},j)});Ae=O?s.createElement(pe.Z,{gutter:O.gutter},ze):s.createElement("ul",{className:"".concat(Z,"-items")},be)}else!N&&!Ee&&(Ae=je(Z,d));var Ze=$.position||"bottom",Be=s.useMemo(function(){return{grid:O,itemLayout:V}},[JSON.stringify(O),V]);return s.createElement(J.Provider,{value:Be},s.createElement("div",(0,P.Z)({className:Pe},Le),(Ze==="top"||Ze==="both")&&Ke,ue&&s.createElement("div",{className:"".concat(Z,"-header")},ue),s.createElement(b.Z,le,Ae,N),Q&&s.createElement("div",{className:"".concat(Z,"-footer")},Q),G||(Ze==="bottom"||Ze==="both")&&Ke))}Ce.Item=ee;var ce=Ce},54421:function(xe,w,e){"use strict";var B=e(38663),P=e.n(B),y=e(57719),k=e.n(y),C=e(13254),s=e(20228),oe=e(14781),q=e(6999)}}]);
