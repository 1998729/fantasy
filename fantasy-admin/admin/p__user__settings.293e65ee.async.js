(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[291],{37913:function(ue,I,i){"use strict";i.r(I),i.d(I,{default:function(){return se}});var S=i(2824),P=i(67294),k=i(84787),ne=i(34792),g=i(48086),w=i(3182),x=i(94043),c=i.n(x),M=i(952),V=i(10927),E=i(5966),z=i(86615),G=i(64317),U=i(90672),F=i(75745),r=i(85893),O=i(56448),Q="LTAI5t8LtTRTLvMQrWcTZLt3",H="Ve1Qr0fIkYoQlXRCgl7XznqF7wKbgS",N="http://ay-blog-oss.oss-accelerate.aliyuncs.com",W=new O({region:"cn-beijing",accessKeyId:Q,accessKeySecret:H,bucket:"ay-blog-oss",cname:!0,endpoint:"ay-blog-oss.oss-accelerate.aliyuncs.com"}),X=function(){var C=(0,P.useState)(""),o=(0,S.Z)(C,2),l=o[0],s=o[1],f=function(){var d=(0,w.Z)(c().mark(function u(e){var t;return c().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(e){a.next=2;break}return a.abrupt("return",!1);case 2:return a.next=4,p(e);case 4:if(t=a.sent,t.length!==0){a.next=8;break}return g.default.error("\u56FE\u7247\u4E0A\u4F20\u5931\u8D25!"),a.abrupt("return");case 8:case"end":return a.stop()}},u)}));return function(e){return d.apply(this,arguments)}}(),p=function(){var d=(0,w.Z)(c().mark(function u(e){var t;return c().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,W.put(e.name,e);case 3:t=a.sent,console.log("put success: %j",t),a.next=11;break;case 7:return a.prev=7,a.t0=a.catch(0),console.error("error: %j",a.t0),a.abrupt("return","");case 11:return a.abrupt("return","".concat(N,"/").concat(e.name));case 12:case"end":return a.stop()}},u,null,[[0,7]])}));return function(e){return d.apply(this,arguments)}}(),v=function(){var d=(0,w.Z)(c().mark(function u(e){var t,n;return c().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(t=e.avatar[0].name,t.indexOf("/")===-1&&(t="".concat(N,"/").concat(e.avatar[0].name)),e.avatar=t,e.display.length!==1){h.next=6;break}return g.default.warning("\u6635\u79F0\u8BF7\u81F3\u5C11\u4FDD\u63012\u4F4D\u53CA\u4EE5\u4E0A"),h.abrupt("return");case 6:return h.next=8,(0,F.AN)(l,e);case 8:n=h.sent,n.success?g.default.success("\u66F4\u65B0\u6210\u529F!"):g.default.error("\u66F4\u65B0\u5931\u8D25");case 10:case"end":return h.stop()}},u)}));return function(e){return d.apply(this,arguments)}}();return(0,r.jsxs)(M.ZP,{submitter:{searchConfig:{resetText:"\u91CD\u7F6E",submitText:"\u63D0\u4EA4"},resetButtonProps:{style:{display:"none"}}},onFinish:v,params:{},request:(0,w.Z)(c().mark(function d(){var u,e;return c().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,F.oo)();case 2:return u=n.sent,e=u.data.list,s(e.userId),n.abrupt("return",{display:e.display,avatar:[{name:e.avatar,url:e.avatar}],description:e.description,gender:e.gender,city:e.city});case 6:case"end":return n.stop()}},d)})),children:[(0,r.jsx)("br",{}),(0,r.jsx)(V.Z,{name:"avatar",label:"\u5934\u50CF",max:1,rules:[{required:!0,message:"\u8BF7\u4E0A\u4F20\u4E00\u4E2A\u5934\u50CF"}],action:f,fieldProps:{name:"fileList",listType:"picture-card"}}),(0,r.jsx)(E.Z,{width:"md",name:"display",label:"\u7528\u6237\u6635\u79F0",placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u6635\u79F0",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u4E00\u4E2A\u7528\u6237\u6635\u79F0"}]}),(0,r.jsx)(z.Z.Group,{name:"gender",label:"\u6027\u522B",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u60A8\u7684\u6027\u522B"}],options:[{label:"\u7537",value:1},{label:"\u5973",value:0}]}),(0,r.jsx)(G.Z,{width:"md",name:"city",label:"\u7701\u4EFD",valueEnum:{\u5317\u4EAC:"\u5317\u4EAC",\u5929\u6D25:"\u5929\u6D25",\u4E0A\u6D77:"\u4E0A\u6D77",\u91CD\u5E86:"\u91CD\u5E86",\u6CB3\u5317:"\u6CB3\u5317",\u5C71\u897F:"\u5C71\u897F",\u8FBD\u5B81:"\u8FBD\u5B81",\u5409\u6797:"\u5409\u6797",\u9ED1\u9F99\u6C5F:"\u9ED1\u9F99\u6C5F",\u6C5F\u82CF:"\u6C5F\u82CF",\u6D59\u6C5F:"\u6D59\u6C5F",\u5B89\u5FBD:"\u5B89\u5FBD",\u798F\u5EFA:"\u798F\u5EFA",\u6C5F\u897F:"\u6C5F\u897F",\u5C71\u4E1C:"\u5C71\u4E1C",\u6CB3\u5357:"\u6CB3\u5357",\u6E56\u5317:"\u6E56\u5317",\u6E56\u5357:"\u6E56\u5357",\u5E7F\u4E1C:"\u5E7F\u4E1C",\u6D77\u5357:"\u6D77\u5357",\u56DB\u5DDD:"\u56DB\u5DDD",\u8D35\u5DDE:"\u8D35\u5DDE",\u4E91\u5357:"\u4E91\u5357",\u9655\u897F:"\u9655\u897F",\u7518\u8083:"\u7518\u8083",\u9752\u6D77:"\u9752\u6D77",\u53F0\u6E7E:"\u53F0\u6E7E",\u5185\u8499\u53E4\u81EA\u6CBB\u533A:"\u5185\u8499\u53E4",\u5E7F\u897F\u58EE\u65CF\u81EA\u6CBB\u533A:"\u5E7F\u897F",\u897F\u85CF\u81EA\u6CBB\u533A:"\u897F\u85CF",\u5B81\u590F\u56DE\u65CF\u81EA\u6CBB\u533A:"\u5B81\u590F",\u65B0\u7586\u7EF4\u543E\u5C14\u81EA\u6CBB\u533A:"\u65B0\u7586",\u9999\u6E2F\u7279\u522B\u884C\u653F\u533A:"\u9999\u6E2F",\u6FB3\u95E8\u7279\u522B\u884C\u653F\u533A:"\u6FB3\u95E8",\u6D77\u5916:"\u6D77\u5916"},placeholder:"\u8BF7\u9009\u62E9\u4E00\u4E2A\u7701\u4EFD",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u4E00\u4E2A\u7701\u4EFD"}]}),(0,r.jsx)(U.Z,{width:"md",name:"description",label:"\u4E2A\u4EBA\u4ECB\u7ECD",placeholder:"\u8BF7\u63CF\u8FF0\u4E00\u4E0B\u98CE\u6D41\u501C\u50A5\u7684\u4F60......"})]})},ie=i(71748),L=i(33860),le=i(54421),Z=i(38272),D=i(69610),$=i(54941),R=i(81306),T=i(19809),K=i(16434),Y=i(37476),A=function(o){var l=0;if(o.length<6)return l;switch(/\d/.test(o)&&l++,/[a-z]/.test(o)&&l++,/[A-Z]/.test(o)&&l++,/\W/.test(o)&&l++,l){case 1:return 1;case 2:return 2;case 3:return 3;case 4:return 4}},J=function(o){var l=["\u5F31","\u4E2D","\u5F3A","\u975E\u5E38\u5F3A"],s=A(o);return l[s-1]},q=function(o){var l,s=J(o);switch(A(o)){case 1:l="#F45A68";break;case 2:l="#fc0";break;case 3:l="#cc0";break;case 4:l="#14B12F";break}return(0,r.jsx)("span",{style:{color:l},children:s})},_=function(o){return!!/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(o)},ee=i(50526),ae=function(C){(0,R.Z)(l,C);var o=(0,T.Z)(l);function l(){var s;(0,D.Z)(this,l);for(var f=arguments.length,p=new Array(f),v=0;v<f;v++)p[v]=arguments[v];return s=o.call.apply(o,[this].concat(p)),s.formRef=P.createRef(),s.state={initLoading:!0,loading:!1,data:[],list:[],visible:!1,selectedKey:"",formItems:[]},s.fetch=(0,w.Z)(c().mark(function d(){var u,e,t,n;return c().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,(0,F.oO)();case 2:if(u=h.sent,u.success){h.next=6;break}return g.default.error("\u83B7\u53D6\u7528\u6237\u5B89\u5168\u4FE1\u606F\u5931\u8D25!"),h.abrupt("return");case 6:e=u.data.list,t="".concat(e.email.split("@")[0].slice(0,3),"***").concat(e.email.split("@")[1]),n=[{key:"id",title:"\u7528\u6237ID",description:(0,r.jsxs)(r.Fragment,{children:["\u7528\u6237\u552F\u4E00\u6807\u8BC6\u7B26: ",(0,r.jsx)("span",{style:{color:"#000000"},children:e.userName})]})},{key:"account",title:"\u8D26\u6237\u5BC6\u7801",description:(0,r.jsxs)(r.Fragment,{children:["\u5F53\u524D\u5BC6\u7801\u5F3A\u5EA6: ",q(e.password)]})},{key:"email",title:"\u7ED1\u5B9A\u90AE\u7BB1",description:"\u5DF2\u7ED1\u5B9A\u90AE\u7BB1: ".concat(t)}],s.setState({data:e,list:n,initLoading:!1});case 10:case"end":return h.stop()}},d)})),s.componentDidMount=(0,w.Z)(c().mark(function d(){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.fetch();case 2:case"end":return e.stop()}},d)})),s.handlerAsyncChangeEmailRequest=function(){var d=(0,w.Z)(c().mark(function u(e){var t;return c().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(e.captcha.length==6){a.next=3;break}return g.default.warning("\u9A8C\u8BC1\u7801\u957F\u5EA6\u9519\u8BEF!"),a.abrupt("return");case 3:if(_(e.dstEmail)){a.next=6;break}return g.default.error("\u65E0\u6548\u7684\u90AE\u7BB1\u5730\u5740!"),a.abrupt("return");case 6:return t={userId:s.state.data.userId,srcEmail:e.srcEmail,dstEmail:e.dstEmail,captcha:e.captcha},a.abrupt("return",(0,F.LL)(t));case 8:case"end":return a.stop()}},u)}));return function(u){return d.apply(this,arguments)}}(),s.handlerAsyncChangePasswordRequest=function(){var d=(0,w.Z)(c().mark(function u(e){var t;return c().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(e.dstPassword===e.confirmPassword){a.next=3;break}return g.default.warning("\u4E24\u6B21\u5BC6\u7801\u8F93\u5165\u6709\u8BEF!"),a.abrupt("return");case 3:if(!(A(e.dstPassword)<=1)){a.next=6;break}return g.default.warning("\u5BC6\u7801\u5F3A\u5EA6\u8F83\u5F31!"),a.abrupt("return");case 6:return t=s.state.data,e.userId=t.userId,e.email=t.email,a.abrupt("return",(0,F.Ky)(e));case 10:case"end":return a.stop()}},u)}));return function(u){return d.apply(this,arguments)}}(),s.handlerChangePassword=function(d){var u,e,t=[],n=s.state.data;switch(d){case"account":var a={userId:n.userId,userName:n.userName};(u=s.formRef.current)===null||u===void 0||u.setFieldsValue(a),t=[(0,r.jsx)(E.Z,{width:600,name:"userName",label:"\u767B\u5F55\u540D\u79F0",placeholder:"\u7528\u6237\u540D\u79F0",disabled:!0,rules:[{required:!0,message:"\u7528\u6237\u540D\u79F0"}]},"userName"),(0,r.jsx)(E.Z.Password,{label:"\u539F\u5BC6\u7801",name:"srcPassword",width:600,rules:[{required:!0,message:"\u539F\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A"}]},"srcPassword"),(0,r.jsx)(E.Z.Password,{label:"\u65B0\u5BC6\u7801",name:"dstPassword",width:600,rules:[{required:!0,message:"\u65B0\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A"}]},"dstPassword"),(0,r.jsx)(E.Z.Password,{label:"\u786E\u8BA4\u5BC6\u7801",name:"confirmPassword",width:600,rules:[{required:!0,message:"\u786E\u8BA4\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A"}]},"confirmPassword"),(0,r.jsx)(K.Z,{width:600,label:"\u90AE\u7BB1\u9A8C\u8BC1\u7801",name:"captcha",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"}],placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801",onGetCaptcha:(0,w.Z)(c().mark(function m(){var B,j;return c().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return B={email:s.state.data.email},y.next=3,(0,F.DE)(B);case 3:j=y.sent,j.success&&g.default.success("\u90AE\u7BB1 ".concat(s.state.data.email," \u9A8C\u8BC1\u7801\u53D1\u9001\u6210\u529F!"));case 5:case"end":return y.stop()}},m)}))},"captcha")];break;case"email":var h={srcEmail:n.email};(e=s.formRef.current)===null||e===void 0||e.setFieldsValue(h),t=[(0,r.jsx)(E.Z,{width:600,name:"srcEmail",label:"\u539F\u90AE\u7BB1\u5730\u5740",placeholder:"\u7528\u6237\u539F\u90AE\u7BB1",disabled:!0,rules:[{required:!0,message:"\u539F\u90AE\u7BB1\u5730\u5740"}]},"srcEmail"),(0,r.jsx)(E.Z,{width:600,name:"dstEmail",label:"\u65B0\u90AE\u7BB1\u5730\u5740",placeholder:"\u7528\u6237\u65B0\u90AE\u7BB1",rules:[{required:!0,message:"\u65B0\u90AE\u7BB1\u5730\u5740"}]},"dstEmail"),(0,r.jsx)(K.Z,{width:600,label:"\u90AE\u7BB1\u9A8C\u8BC1\u7801",fieldProps:{prefix:(0,r.jsx)(ee.Z,{})},name:"captcha",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"}],placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801",onGetCaptcha:(0,w.Z)(c().mark(function m(){var B,j;return c().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return B={email:s.state.data.email},y.next=3,(0,F.DE)(B);case 3:j=y.sent,j.success&&g.default.success("\u90AE\u7BB1 ".concat(s.state.data.email," \u9A8C\u8BC1\u7801\u53D1\u9001\u6210\u529F!"));case 5:case"end":return y.stop()}},m)}))},"captcha")];break}s.setState({visible:!0,formItems:t,selectedKey:d})},s}return(0,$.Z)(l,[{key:"render",value:function(){var f=this,p=this.state,v=p.initLoading,d=p.list,u=p.formItems;return(0,r.jsxs)("div",{children:[(0,r.jsx)("br",{}),(0,r.jsx)(Z.ZP,{className:"demo-loadmore-list",loading:v,itemLayout:"horizontal",dataSource:d,renderItem:function(t){return(0,r.jsx)(Z.ZP.Item,{actions:[(0,r.jsx)("a",{disabled:t.key==="id",onClick:function(){f.handlerChangePassword(t.key)},children:"\u4FEE\u6539"},"list-loadmore-edit")],children:(0,r.jsx)(L.Z,{avatar:!0,title:!1,loading:!1,active:!0,children:(0,r.jsx)(Z.ZP.Item.Meta,{title:t.title,description:t.description})})})}}),(0,r.jsx)(Y.Z,{formRef:this.formRef,width:700,title:"\u4FEE\u6539\u4FE1\u606F",visible:this.state.visible,autoFocusFirstInput:!0,modalProps:{onCancel:function(){return f.setState({visible:!1})}},onFinish:function(){var e=(0,w.Z)(c().mark(function t(n){var a,h,m,B;return c().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return a=f.state.selectedKey,a==="email"?h=f.handlerAsyncChangeEmailRequest:h=f.handlerAsyncChangePasswordRequest,b.next=4,h(n);case 4:if(m=b.sent,!m.success){b.next=11;break}return g.default.success("\u4FEE\u6539\u6210\u529F"),b.next=9,f.fetch();case 9:(B=f.formRef.current)===null||B===void 0||B.resetFields(),f.setState({visible:!1});case 11:return b.abrupt("return",!0);case 12:case"end":return b.stop()}},t)}));return function(t){return e.apply(this,arguments)}}(),children:u})]})}}]),l}(P.Component),ce=i(77576),re=i(12028),te=function(C){(0,R.Z)(l,C);var o=(0,T.Z)(l);function l(){var s;(0,D.Z)(this,l);for(var f=arguments.length,p=new Array(f),v=0;v<f;v++)p[v]=arguments[v];return s=o.call.apply(o,[this].concat(p)),s.state={initLoading:!0,loading:!1,data:[],list:[]},s.fetch=(0,w.Z)(c().mark(function d(){var u,e,t;return c().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,F.fh)();case 2:if(u=a.sent,u.success){a.next=6;break}return g.default.error("\u83B7\u53D6\u7528\u6237\u5B89\u5168\u4FE1\u606F\u5931\u8D25!"),a.abrupt("return");case 6:e=u.data.list,t=[{key:"article",title:"\u6587\u7AE0\u70B9\u8D5E",description:"\u4F60\u7684\u6587\u7AE0\u88AB\u7528\u6237\u70B9\u8D5E\u540E, \u4F1A\u8FDB\u884C\u90AE\u7BB1\u65B9\u5F0F\u901A\u77E5",checked:e.isLikeNotice},{key:"comment",title:"\u6587\u7AE0\u8BC4\u8BBA",description:"\u6587\u7AE0\u88AB\u8BC4\u8BBA\u540E, \u4F1A\u8FDB\u884C\u90AE\u7BB1\u65B9\u5F0F\u901A\u77E5",checked:e.isCommentNotice},{key:"follow",title:"\u5173\u6CE8\u901A\u77E5",description:"\u4F60\u88AB\u5173\u6CE8\u540E\uFF0C\u4F1A\u8FDB\u884C\u90AE\u7BB1\u65B9\u5F0F\u901A\u77E5",checked:e.IsFollowNotice},{key:"private",title:"\u79C1\u4FE1\u901A\u77E5",description:"\u5F53\u7528\u6237\u79C1\u4FE1\u60A8\u65F6\uFF0C\u4F1A\u8FDB\u884C\u90AE\u7BB1\u65B9\u5F0F\u901A\u77E5",checked:e.isPrivateChatNotice}],s.setState({data:e,list:t,initLoading:!1});case 9:case"end":return a.stop()}},d)})),s.componentDidMount=(0,w.Z)(c().mark(function d(){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.fetch();case 2:case"end":return e.stop()}},d)})),s.handlerChange=function(){var d=(0,w.Z)(c().mark(function u(e){var t,n,a;return c().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:t=s.state.data,n={isLikeNotice:t.isLikeNotice,isCommentNotice:t.isCommentNotice,IsFollowNotice:t.IsFollowNotice,isPrivateChatNotice:t.isPrivateChatNotice,userId:t.userId},m.t0=e,m.next=m.t0==="article"?5:m.t0==="comment"?7:m.t0==="follow"?9:m.t0==="private"?11:13;break;case 5:return n.isLikeNotice=!n.isLikeNotice,m.abrupt("break",13);case 7:return n.isCommentNotice=!n.isCommentNotice,m.abrupt("break",13);case 9:return n.IsFollowNotice=!n.IsFollowNotice,m.abrupt("break",13);case 11:return n.isPrivateChatNotice=!n.isPrivateChatNotice,m.abrupt("break",13);case 13:return m.next=15,(0,F.ku)(n);case 15:a=m.sent,a.success&&s.setState({data:n},function(){g.default.success("\u66F4\u65B0\u6210\u529F")});case 17:case"end":return m.stop()}},u)}));return function(u){return d.apply(this,arguments)}}(),s}return(0,$.Z)(l,[{key:"render",value:function(){var f=this,p=this.state,v=p.initLoading,d=p.list;return(0,r.jsxs)("div",{children:[(0,r.jsx)("br",{}),(0,r.jsx)(Z.ZP,{className:"demo-loadmore-list",loading:v,itemLayout:"horizontal",dataSource:d,renderItem:function(e){return(0,r.jsx)(Z.ZP.Item,{actions:[(0,r.jsxs)("a",{disabled:e.key==="id",onClick:function(){f.handlerChange(e.key)},children:["   ",(0,r.jsx)(re.Z,{checkedChildren:"\u5F00\u542F",unCheckedChildren:"\u5173\u95ED",defaultChecked:e.checked})]},"list-loadmore-edit")],children:(0,r.jsx)(L.Z,{avatar:!0,title:!1,loading:!1,active:!0,children:(0,r.jsx)(Z.ZP.Item.Meta,{title:e.title,description:e.description})})})}})]})}}]),l}(P.Component),se=function(){var C=(0,P.useState)("basic"),o=(0,S.Z)(C,2),l=o[0],s=o[1];return(0,r.jsx)("div",{children:(0,r.jsxs)(k.ZP,{tabs:{tabBarStyle:{width:220},tabPosition:"left",activeKey:l,onChange:function(p){s(p)}},children:[(0,r.jsxs)(k.ZP.TabPane,{tab:"\u57FA\u672C\u8BBE\u7F6E",children:[(0,r.jsx)("h2",{children:"\u57FA\u672C\u8BBE\u7F6E"}),(0,r.jsx)(X,{})]},"basic"),(0,r.jsxs)(k.ZP.TabPane,{tab:"\u5B89\u5168\u8BBE\u7F6E",children:[(0,r.jsx)("h2",{children:"\u5B89\u5168\u8BBE\u7F6E"}),(0,r.jsx)(ae,{})]},"security"),(0,r.jsxs)(k.ZP.TabPane,{tab:"\u6D88\u606F\u901A\u77E5",children:[(0,r.jsx)("h2",{children:"\u6D88\u606F\u901A\u77E5"}),(0,r.jsx)(te,{})]},"notice")]})})}}}]);
